# 【EC2】WordPressを構築

- WebサーバーにWordPressをインストール
- WordPressからデータベースを接続

## WordPress用のデータベースを作成

1. データベース作成
2. ユーザー作成
3. ユーザーに権限付与

### データベース作成

- SSHにログイン
```terminal
$ ssh -i {秘密鍵}.pem ec2-user@{IPv4パブリックIP}
```
- MySQLコマンドでRDSへ接続
   - `RDS/データベース`で作成したデータベースの`エンドポイント`をコピー
```terminal
$ mysql -h {エンドポイント} -u {マスターユーザー名} -p
```
- データベース作成
```terminal
MySQL [(none)]> CREATE DATABASE {データベース名} DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
```
   - `CREATE DATABASE`はデータベースを作成するコマンド
   - `DEFAULT CHARACTER SET`でデフォルトの文字コード指定
   - `COLLATE`は比較に対するデフォルト照合順序
- データベースが作成されたか確認
```terminal
MySQL [(none)]> SHOW DATABASES;
```
- WordPress用のユーザー作成
```terminal
MySQL [(none)]> CREATE USER '{ユーザー名}'@'%' IDENTIFIED BY '{パスワード}';
```
   - `'@'%'`で接続元はどこでもOK
   - `IDENTIFIED BY`でパスワードを指定
- 作成したユーザーに権限付与
```terminal
MySQL [(none)]> GRANT ALL ON {データベース名}.* TO '{ユーザー名}'@'%';
```
   - `GRANT`コマンドで権限付与
   - `ALL`で全ての操作権限を付与
   - `{データベース名}.*`でデータベースの全てのテーブルを操作できる
- 設定を反映させる
```terminal
MySQL [(none)]> FLUSH PRIVILEGES;
```
- ユーザー作成が反映されたか確認
```terminal
MySQL [(none)]> SELECT user , host FROM mysql.user;
```
- 作成したユーザーでMySQLに接続できるか確認
```terminal
$ mysql -h {エンドポイント} -u {作成したユーザー名} -p
```
- ログアウトする
