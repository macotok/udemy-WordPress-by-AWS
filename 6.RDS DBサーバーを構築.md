# RDS DBサーバーを構築

## RDSとは

- AWSのフルマネージドなリレーショナルデータベースのサービス
- コア機能の開発に注力できるように設計されている
- EC2にDBを設置する場合のAWSのサービス
  - OSインストール
  - 物理サーバー設置
- RDSにDBを設置する場合のAWSのサービス
  - OSインストール
  - 物理サーバー設置
  - スケーリング
  - バックアップ
  - アップデート

### RDSの利用可能なエンジン

- MySQL
- PostgreSQL
- Oracle
- Microsoft SQL Server
- Amazon Aurora
- MariaDB

### 各種設定グループ

- DBパラメータグループ(DB設定値を制御)
- DBオプショングループ(RDSへの機能追加を制御)
- DBサブネットグループ(RDSを起動させるサブネットを制御)

## RDSの特徴

- 可用性の向上
- パフォーマンスの向上
- 運用負荷の軽減

### 可用性の向上

- マルチAZを簡単に構築
  - 複数のアベイラビリティゾーンをまたいでRDSインスタンスを作成
  - 作成するRDSの1つはマスター、もう1つはスレーブ
  - 通常はマスターを使用、マスターが壊れたらスレーブに接続

### パフォーマンスの向上

- リードレプリカを簡単に構築
  - マスターと同期された読み取り専用のRDSをリードレプリカという
  - アプリクーポンからのDBの読み込みはリードレプリカで行う

### 運用負荷の軽減

- 自動的なバックアップ
  - 1日1回バックアップを自動取得(スナップショット)
  - スナップショットを元にDBインスタンスを作成(リストア)
- 自動的なソフトウェアメンテナンス
  - メンテナンスウィンドウで指定した曜日・時間帯にアップデートを自動実施
- 監視
  - 各種メトリクスを60秒間隔で取得・確認可能

## プライベートサブネットを作成

- マルチAZを構築するために複数のアベイラビリティゾーンでプライベートサブネットを作成する
- すでに１つプライベートサブネット(10.0.20.0/24)を作成しているのでもう1つプライベートサブネットを作成する
- IPアドレスは`10.0.21.0/24`
- サービス/VPC/サブネット
- サブネットの作成
- VPCは作成済のVPCを選択
- アベイラビリティゾーンは`ap-northeast-1c`を選択
- IPv4 CIDR ブロックは`10.0.21.0/24`と入力
