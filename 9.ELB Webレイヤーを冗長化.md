# 【ELB】Webレイヤーを冗長化

## 稼働率を上げるための基本的な考え方

- 障害発生間隔を長くする
- 平均復旧時間を短くする
- システムの構成要素を多重化する
- ある構成要素で障害が発生しても処理を引き継げるようにする
- 単一障害点(SPOF)をなくす

### 単一障害点とは

- 多重化してない構成要素
- ある構成要素で障害が発生するとシステム全体が停止する

## 稼働率を上げる具体的な方法

- 要素単体の稼働率を高くする(限界がある)
- 要素を組み合わせて、全体の稼働率を高くする(AWSで対応)
- 負荷を適切なプロビジョニングで回避する(AWSで対応)

### 要素を組み合わせて、全体の稼働率を高くする

冗長化構成

- Active-Active 冗長化した両方が利用可能
- Active-Standby 冗長化した片方は利用不可能
    - Hot Standby スタンバイ側は普段起動しすぐに利用可能
    - Warm Standby スタンバイ側は普段起動してるが、利用するのに準備が必要
    - Cold Standby スタンバイ側は普段停止している

### 負荷を適切なプロビジョニングで回避する

- プロビジョニングとはアクセス数を予測して適切にリソースを準備すること
- スケールアップさせる
    - 個々の要素の性能を向上させる
    - ある程度の規模まではスケールアップで対応。一定h範囲を超えるとコストパフォマンスが悪くなる
 - スケールアウトさせる
    - 個々の要素の数を増やす
    - ある程度の規模を超えそうであればスケールアウトで対応
    - 最低限用意しておくべき構成がN+1構成、安心なのはN+2構成。(Nは普段使用する要素数)
