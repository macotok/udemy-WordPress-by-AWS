# AWS初期設定

## 料金アラートを設定
- AWSの利用料金がいくらを超えたら通知するように設定
- 請求ダッシュボードで請求アラートを受け取るように設定
- CloudWatchで料金アラートを設定

### 請求ダッシュボードで請求アラートを受け取るように設定
- アカウント名/マイ請求ダッシュボード/Billingの設定
- `電子メールで PDF 版請求書を受け取る`にチェック
- `無料利用枠の使用のアラートの受信`にチェック(1年間の無料枠を超えそうになったらアラート)。Eメールアドレスに入力
- `請求アラートを受け取る`にチェックでCloudWatchで料金アラートを設定することができる

### CloudWatchで料金アラートを設定
- `請求アラートを管理する`をクリック
- CloudWatch/請求/アラームの作成
- 請求アラームで超過の額を設定(10USD)
- 通知の連絡先入力

## IAMで作業用ユーザーを作成
- AWSアカウントを作成するとルートユーザーが作成される
- ルートユーザーは普段は使用せず、作業用のIAMユーザーを使用するのがベストプラクティス

### ルートユーザーとは
- 全てのAWSサービスとAWSリソース全てにアクセス権を持つユーザー
- アカウントの変更、解約、サポートプランの変更等のみ使用
- 極力ルートユーザーは使用しない

### IAMユーザーとは
- AWSで作成するユーザー
- 認証情報とアクセス許可の権限を個別に変更できる
- 作業者ごとに個別に作成
- 通常の作業はIAMユーザーで行う
- エンジニア、ディレクターによって権限を分ける

### ルートユーザーでの作業
- マイアカウント/IAM ユーザー/ロールによる請求情報へのアクセス/編集
- IAM アクセスのアクティブ化(IAMユーザーで請求情報が閲覧できる)

### IAMユーザーの設定
- サービス/IAMで検索
- ユーザー/ユーザーを追加
- アクセスの種類`AWS マネジメントコンソールへのアクセス`にチェック
- `パスワードのリセットが必要`他の作業者のためのユーザー作成時にチェック。`自動生成パスワード`を選択
- `既存のポリシーを直接アタッチ`AWSが定めたデフォルトの権限
- `AdministratorAccess`にチェック。ほとんどのサービスにアクセスできる権限
- `タグの追加`そのユーザーがどういう役割かを入力

## 操作ログを記録しよう
- いつ誰が何をしたのかを記録しておく
- 不正アクセスや不正操作があったときにチェックできるようにする
- CloudTrailで証跡を作成
- S3にログが保存される

### CloudTrailとは
- AWSユーザーの操作を記録するサービス
- 操作ログをS3に保存(永久に保存できる)
- CloudTrail自体は無料。S3の料金はかかる

### CloudTrail設定
- サービス/CloudTrailで検索
- 証跡の作成
- データイベント/S3/`アカウントのすべての S3 バケットの選択`にチェック
- ストレージの場所/新しい S3 バケットを作成しますかで`はい`を選択
- S3バケット名を入力
