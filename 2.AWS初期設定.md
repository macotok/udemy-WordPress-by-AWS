# AWS初期設定

## 料金アラートを設定
- AWSの利用料金が設定額を超えたら通知する
- 請求ダッシュボードで請求アラートを受け取る
- CloudWatchで料金アラートを設定

### 請求ダッシュボードで請求アラートを受け取るように設定

|  画面  |
| ---- |
|  アカウント名/マイ請求ダッシュボード/Billingの設定  |

- `電子メールで PDF 版請求書を受け取る`にチェック
- `無料利用枠の使用のアラートの受信`にチェック(1年間の無料枠を超えそうになったらアラート)。Eメールアドレスを入力
- `請求アラートを受け取る`にチェック。CloudWatchで料金アラートを設定することができる
- `請求アラートを管理する`を押下

### CloudWatchで料金アラートを設定

|  画面  |  押下  |
| ---- | ---- |
|  サービス/CloudWatch/請求  |  アラームの作成  |

- 請求アラームで超過の額を設定(例 10USD)
- `通知の連絡先`を入力

## IAMの作業用ユーザーとは

- AWSアカウントを作成するとルートユーザーが作成される
- ルートユーザーは通常使用せず、作業用のIAMユーザーを作成して使用するのがベストプラクティス

### ルートユーザーとは

- 全てのAWSサービスとAWSリソースのアクセス権を持つユーザー
- アカウントの変更、解約、サポートプランの変更等のアクションのときのみに使用
- 極力ルートユーザーは使用しない

### IAMユーザーとは

- AWSで作成するユーザー
- 認証情報とアクセス許可の権限を個別に設定できる
- 作業者ごとに個別作成
- 通常の作業はIAMユーザーで行う
- エンジニア、ディレクターによって権限を分ける

### ルートユーザーでの作業

|  画面  |  押下  |
| ---- | ---- |
|  マイアカウント/IAM ユーザー/ロールによる請求情報へのアクセス  |  編集  |

- IAM アクセスのアクティブ化(IAMユーザーで請求情報が閲覧できる)

### IAMユーザーの設定

|  画面  |  押下  |
| ---- | ---- |
|  サービス/IAM/ユーザー  |  ユーザーを追加  |


- アクセスの種類`AWS マネジメントコンソールへのアクセス`にチェック
- `パスワードのリセットが必要`で他の作業者用のユーザー作成のとき自動生成パスワードが生成される
- `既存のポリシーを直接アタッチ`とはAWSが定めたデフォルトの権限
- `AdministratorAccess`とはほとんどのサービスにアクセスできる権限
- `タグの追加`でそのユーザーがどういう役割かを入力

## 操作ログを記録とは
- いつ誰が何をしたのかを記録しておく
- 不正アクセスや不正操作があったときにチェックできるようにする
- CloudTrailで証跡を作成
- S3にログが保存される

### CloudTrailとは
- AWSユーザーの操作を記録するサービス
- 操作ログをS3に保存(永久に保存できる)
- CloudTrailは無料。S3は従量課金制

### CloudTrailの設定

|  画面  |  押下  |
| ---- | ---- |
|  サービス/CloudTrail  |  証跡の作成  |


- データイベント
    - S3
        - `アカウントのすべての S3 バケットの選択`にチェック
- ストレージの場所
    - `新しいS3 バケットを作成しますか`で「はい」を選択
    - `S3バケット`を入力
