# AWS初期設定

## 料金アラートを設定
- AWSの利用料金が設定額を超えたら通知する
- 請求ダッシュボードで請求アラートを受け取る
- CloudWatchで料金アラートを設定

### 請求ダッシュボードで請求アラートを受け取るように設定

画面: アカウント名/マイ請求ダッシュボード/Billingの設定

- `電子メールで PDF 版請求書を受け取る`にチェック
- `無料利用枠の使用のアラートの受信`にチェック(1年間の無料枠を超えそうになったらアラート)。Eメールアドレスを入力
- `請求アラートを受け取る`にチェックでCloudWatchで料金アラートを設定することができる
- `請求アラートを管理する`のテキストをクリック

### CloudWatchで料金アラートを設定

画面: CloudWatch/請求
押下: アラームの作成

- 請求アラームで超過の額を設定(例 10USD)
- 通知の連絡先入力

## IAMの作業用ユーザーとは

- AWSアカウントを作成するとルートユーザーが作成される
- ルートユーザーは通常使用せず、作業用のIAMユーザーの使用がベストプラクティス

### ルートユーザーとは

- 全てのAWSサービスとAWSリソース全てにアクセス権を持つユーザー
- アカウントの変更、解約、サポートプランの変更等のみ使用
- 極力ルートユーザーは使用しない

### IAMユーザーとは

- AWSで作成するユーザー
- 認証情報とアクセス許可の権限を個別に変更できる
- 作業者ごとに個別作成
- 通常の作業はIAMユーザーで行う
- エンジニア、ディレクターによって権限を分ける

### ルートユーザーでの作業

画面: マイアカウント/IAM ユーザー/ロールによる請求情報へのアクセス
押下: 編集

- IAM アクセスのアクティブ化(IAMユーザーで請求情報が閲覧できる)

### IAMユーザーの設定

画面: サービス/IAM/ユーザー
押下: ユーザーを追加

- アクセスの種類`AWS マネジメントコンソールへのアクセス`にチェック
- `パスワードのリセットが必要`で他の作業者用のユーザー作成のとき`自動生成パスワード`を生成される
- `既存のポリシーを直接アタッチ`とはAWSが定めたデフォルトの権限
- `AdministratorAccess`とはほとんどのサービスにアクセスできる権限
- `タグの追加`でそのユーザーがどういう役割かを入力

## 操作ログを記録とは
- いつ誰が何をしたのかを記録しておく
- 不正アクセスや不正操作があったときにチェックできるようにする
- `CloudTrail`で証跡を作成
- `S3`にログが保存される

### CloudTrailとは
- AWSユーザーの操作を記録するサービス
- 操作ログを`S3`に保存(永久に保存できる)
- `CloudTrail`自体は無料。`S3`の料金はかかる

### CloudTrail設定

画面: サービス/CloudTrail
押下: 証跡の作成

- データイベント/S3/`アカウントのすべての S3 バケットの選択`にチェック
- ストレージの場所/新しい S3 バケットを作成しますかで`はい`を選択
- S3バケット名を入力
